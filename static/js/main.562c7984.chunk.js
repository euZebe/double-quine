(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a(280)},152:function(e,t,a){},278:function(e,t,a){},280:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),o=a.n(i),c=(a(152),a(18)),l=a(19),s=a(22),u=a(21),p=a(23),m=a(289),d=a(288),h=a(136),g=a.n(h),b=a(41),v=a(36),f=(a(94),a(28)),y=a(285),O=a(287),j=a(20),w=a(49),k={width:"2.5rem",height:"2.5rem",border:"5px solid #33e8",borderRadius:"2rem",margin:"3px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"large",color:"#55f",fontFamily:"monospace"},E=Object(w.a)({},k,{border:"5px solid lightgrey",color:"grey"}),S=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.on;return n.createElement("div",{"data-testid":a?"picked":"available",style:a?k:E},t)}}]),t}(n.PureComponent),x={container:{gridArea:"list"},list:{display:"flex",flexWrap:"wrap",minHeight:"41px"}},D=function(e){var t=e.game;return n.createElement("div",{style:x.container},n.createElement("h2",null," Total tirages: ",t.pickedValues.length),n.createElement("div",{style:x.list},t&&t.pickedValues.map(function(e){return n.createElement(S,{value:e,key:e,on:!0})})))},I=a(126),V=a.n(I),P={display:"flex",justifyContent:"center"},A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=a.props,t=e.value;(0,e.toggleNumber)(t)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.createElement(O.a,{onClick:this.handleClick,basic:!0,fluid:!0,className:"nomargin"},n.createElement("div",{style:P},n.createElement(S,this.props)))}}]),t}(n.PureComponent),N={display:"flex",justifyContent:"space-between"},G=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getOnProp=function(e){return e.props.on},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return!V()(e.children.map(this.getOnProp),this.props.children.map(this.getOnProp))}},{key:"render",value:function(){var e=this.props.children;return n.createElement("div",{style:N},e)}}]),t}(n.Component),C={gridArea:"board"},T=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pickedValues,a=e.onValuePicked,r=this.props.rows,i=void 0===r?9:r;return n.createElement("div",{style:C},Array(i).fill(null).map(function(e,r){return n.createElement(G,{key:r},Array(10).fill(null).map(function(e,i){var o=10*r+i+1;return n.createElement(A,{key:i,value:o,on:t.includes(o),toggleNumber:a})}))}))}}]),t}(n.PureComponent),z=1e3,F={gridArea:"chrono",alignSelf:"start",justifySelf:"end"},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={startTime:void 0,currentInterval:void 0,elapsedTime:void 0},a.play=function(){var e=new Date,t=setInterval(function(){var t=(new Date).getTime()-e.getTime();a.setState({elapsedTime:t})},z);a.setState({currentInterval:t})},a.stop=function(){clearInterval(a.state.currentInterval);var e=a.props.timeFromPastSession,t=a.state.elapsedTime;t&&a.props.onStop(t+1e3*e)},a.onTwoDigits=function(e){return e.toString().padStart(2,"0")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentDidMount",value:function(){this.props.startNow&&this.play()}},{key:"componentDidUpdate",value:function(e){!e.startNow&&this.props.startNow&&this.play()}},{key:"renderElapsedTime",value:function(){var e=this.props.timeFromPastSession,t=this.state.elapsedTime||0,a=new Date(t+1e3*e),n=[a.getUTCHours(),a.getMinutes(),a.getSeconds()].map(this.onTwoDigits).filter(function(e,t){return 0!==t||"00"!==e}).join(":");return r.a.createElement("h2",{"data-testid":"display"},n)}},{key:"render",value:function(){return r.a.createElement("div",{style:F},this.renderElapsedTime())}}]),t}(r.a.PureComponent);M.defaultProps={timeFromPastSession:0};var H,J,W,R,U=M,B={display:"grid",height:"calc(100vh - 28px)",gridTemplateAreas:"'board board' 'list chrono' 'list button'",gridTemplateColumns:"82vw 1fr"},$={gridArea:"button",alignSelf:"end",justifySelf:"end"},q=Object(j.observer)(function(e){var t=e.game,a=e.isStarted,r=e.setDuration,i=e.handleValuePicked;return n.createElement("div",{style:B},n.createElement(T,{pickedValues:t.pickedValues,onValuePicked:i}),n.createElement(D,{game:t}),n.createElement(U,{startNow:a,onStop:r,timeFromPastSession:t.duration}),n.createElement(y.a,{to:"/",style:$},n.createElement(O.a,{color:"violet"},"Fin de partie")))}),K=a(7),L=Object(j.inject)("gamesStore")(H=Object(j.observer)((J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isStarted:!1},Object(b.a)(a,"toggleValue",W,Object(v.a)(Object(v.a)(a))),Object(b.a)(a,"handleDuration",R,Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.gamesStore;e.currentGameIndex=this.getIDAsNumber(),this.getIDAsNumber()>=e.games.length&&e.initiateNewGame()}},{key:"getID",value:function(){return this.props.match.params.id}},{key:"getIDAsNumber",value:function(){return Number.parseInt(this.getID())}},{key:"render",value:function(){var e=this.props.gamesStore.games;if(this.getIDAsNumber()>=e.length)return"";var t=e[this.getIDAsNumber()],a=this.state.isStarted;return n.createElement(q,{game:t,isStarted:a,handleValuePicked:this.toggleValue,setDuration:this.handleDuration})}}]),t}(n.Component),Object(f.a)(J.prototype,"componentDidMount",[K.action],Object.getOwnPropertyDescriptor(J.prototype,"componentDidMount"),J.prototype),W=Object(f.a)(J.prototype,"toggleValue",[K.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.toggleValue(e.getIDAsNumber(),t),e.setState({isStarted:!0})}}}),R=Object(f.a)(J.prototype,"handleDuration",[K.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.setDuration(e.getIDAsNumber(),t)}}}),H=J))||H)||H,Q=a(65),X=a(286),Y=a(138),Z={position:"relative",top:"4px",left:"-5px"},_=function(e){var t=e.size,a=e.color,n=Object(Y.a)(e,["size","color"]);return r.a.createElement("svg",Object.assign({fillRule:"evenodd",clipRule:"evenodd",width:t||32,height:t||32},n,{fill:a||"white",style:Z}),r.a.createElement("path",{d:"M9 3h6V1.25a.25.25 0 0 0-.25-.25h-5.5a.25.25 0 0 0-.25.25V3zm11 1H4v18a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4zM10 7.5a.5.5 0 0 0-1 0v12a.5.5 0 0 0 1 0v-12zm5 0a.5.5 0 0 0-1 0v12a.5.5 0 0 0 1 0v-12zM23 3v1h-2v18a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4H1V3h7V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h7z"}))};function ee(e){if(!e)return"";var t=Math.floor(e/60);return"".concat(t," minute").concat(t>1?"s":"")}var te=Object(j.observer)(function(e){var t,a=e.game,n=e.index;return r.a.createElement(X.a,{header:"Partie ".concat(n+1),meta:(t=a.pickedValues.length,"".concat(t," tirage").concat(t>1?"s":"")+" - "+ee(a.duration)),description:r.a.createElement("span",{"data-testid":"game-card"},a.pickedValues.join(", ")),extra:r.a.createElement(y.a,{to:"/game/".concat(n)},r.a.createElement(O.a,{basic:!0,color:"violet"},"Continuer"))})}),ae=function(e){var t=e.newIndex;return r.a.createElement(X.a,{description:"D\xe9marrer nouvelle partie",extra:r.a.createElement(y.a,{to:"/game/".concat(t)},r.a.createElement(O.a,{color:"violet"},"Nouvelle partie"))})};var ne,re,ie,oe,ce={position:"fixed",bottom:"20px",right:"20px",borderRadius:"2rem",margin:0,maxWidth:"56px",maxHeight:"56px"},le=Object(j.inject)("gamesStore")(Object(j.observer)(function(e){var t=e.gamesStore;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{as:"div",color:"violet",role:"button","aria-label":"clear all games",tabIndex:0,style:ce,onClick:function(){return e=t,void(window.confirm("Voulez-vous supprimer toutes les parties ?")&&e.trashAllGames());var e}},r.a.createElement(_,null)),r.a.createElement(X.a.Group,null,t.games&&[].concat(Object(Q.a)(t.games.map(function(e,t){return r.a.createElement(te,{key:t,game:e,index:t})})),[r.a.createElement(ae,{newIndex:t.games.length,key:t.games.length})]).reverse()))})),se=Object(j.observer)(ne=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.Provider,{gamesStore:this.props.store},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(g.a,null),r.a.createElement(d.a,{path:"/",exact:!0,component:le}),r.a.createElement(d.a,{path:"/game/:id",component:L})))))}}]),t}(r.a.Component))||ne;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue={pickedValues:[],duration:0},pe=(re=function(){function e(){var t=this;Object(c.a)(this,e),Object(b.a)(this,"games",ie,this),Object(b.a)(this,"currentGameIndex",oe,this),Object(K.autorun)(function(){t.persistGame(t.currentGameIndex,t.games[t.currentGameIndex])})}return Object(l.a)(e,[{key:"getItemsFromStorage",value:function(){return Object.values(window.localStorage).map(function(e){return Object(K.observable)(JSON.parse(e))})}},{key:"toggleValue",value:function(e,t){var a=this.games[e],n=a.pickedValues,r=n.indexOf(t);if(n.length&&r===n.length-1){var i=Object(w.a)({},a,{pickedValues:n.slice(0,n.length-1)});this.games.splice(e,1,i)}else if(-1===r){var o=Object(w.a)({},a,{pickedValues:[].concat(Object(Q.a)(n),[t])});this.games.splice(e,1,o)}}},{key:"setDuration",value:function(e,t){this.games[e].duration=Math.floor(t/1e3)}},{key:"initiateNewGame",value:function(){this.games.push(ue)}},{key:"trashAllGames",value:function(){this.games.splice(0,this.games.length),this.currentGameIndex=-1,localStorage.clear()}},{key:"persistGame",value:function(e,t){this.currentGameIndex>=0&&this.currentGameIndex<this.games.length&&localStorage.setItem(e.toString(),JSON.stringify(Object(K.toJS)(t)))}}]),e}(),ie=Object(f.a)(re.prototype,"games",[K.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getItemsFromStorage()}}),oe=Object(f.a)(re.prototype,"currentGameIndex",[K.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Object(f.a)(re.prototype,"toggleValue",[K.action],Object.getOwnPropertyDescriptor(re.prototype,"toggleValue"),re.prototype),Object(f.a)(re.prototype,"setDuration",[K.action],Object.getOwnPropertyDescriptor(re.prototype,"setDuration"),re.prototype),Object(f.a)(re.prototype,"initiateNewGame",[K.action],Object.getOwnPropertyDescriptor(re.prototype,"initiateNewGame"),re.prototype),Object(f.a)(re.prototype,"trashAllGames",[K.action],Object.getOwnPropertyDescriptor(re.prototype,"trashAllGames"),re.prototype),re),me=(a(275),a(278),new pe);o.a.render(r.a.createElement(se,{store:me}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,2,1]]]);
//# sourceMappingURL=main.562c7984.chunk.js.map