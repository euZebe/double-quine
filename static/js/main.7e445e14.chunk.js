(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,n){e.exports=n(290)},161:function(e,t,n){},288:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),i=n.n(o),c=(n(161),n(16)),l=n(17),s=n(23),u=n(20),p=n(24),m=n(299),d=n(298),f=n(43),g=n(39),b=(n(91),n(29)),h=n(26),v=n(295),O=n(297),j=n(19),y=n(51),w={width:"2.5rem",height:"2.5rem",border:"5px solid rgba(85, 85, 255, .8)",borderRadius:"2rem",margin:"3px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"large",color:"#55f",fontFamily:"monospace"},k=Object(y.a)({},w,{border:"5px solid lightgrey",color:"grey"}),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.on;return r.createElement("div",{"data-testid":n?"picked":"available",style:n?w:k},t)}}]),t}(r.PureComponent),S={container:{gridArea:"list"},list:{display:"flex",flexWrap:"wrap",minHeight:"41px"}},D=function(e){var t=e.game;return r.createElement("div",{style:S.container},r.createElement("h2",null," Total tirages: ",t.pickedValues.length),r.createElement("div",{style:S.list},t&&t.pickedValues.map(function(e){return r.createElement(E,{value:e,key:e,on:!0})})))},P=n(133),I=n.n(P),x=n(27);function N(){var e=Object(h.a)(["\n  position: relative;\n  top: 2rem;\n  left: 1rem;\n  font-size: 1.5rem;\n  width: 0;\n"]);return N=function(){return e},e}function V(){var e=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n"]);return V=function(){return e},e}var A,C,G,T=x.a.div(V()),F=x.a.span(N()),W=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){var e=n.props,t=e.value;(0,e.toggleNumber)(t)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.timesPicked;return r.createElement(O.a,{onClick:this.handleClick,basic:!0,fluid:!0,className:"numberCell"},r.createElement(T,null,r.createElement(E,this.props),r.createElement(F,null,e)))}}]),t}(r.PureComponent);function z(){var e=Object(h.a)(["\n  grid-area: board;\n"]);return z=function(){return e},e}function M(){var e=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return M=function(){return e},e}var U=x.a.div(M()),q=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).getOnProp=function(e){return e.props.on},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return!I()(e.children.map(this.getOnProp),this.props.children.map(this.getOnProp))}},{key:"render",value:function(){var e=this.props.children;return r.createElement(U,null,e)}}]),t}(r.Component),J=x.a.div(z()),R=Object(j.b)("gamesStore")(A=Object(j.c)((G=C=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pickedValues,n=e.onValuePicked,a=e.gamesStore,o=this.props.rows,i=void 0===o?9:o;return r.createElement(J,null,Array(i).fill(null).map(function(e,o){return r.createElement(q,{key:o},Array(10).fill(null).map(function(e,i){var c=10*o+i+1;return r.createElement(W,{key:i,value:c,on:t.includes(c),toggleNumber:n,timesPicked:a?a.allPickedNumbers[c]:0})}))}))}}]),t}(r.Component),C.defaultProps={gamesStore:null},A=G))||A)||A;function B(){var e=Object(h.a)(["\n  grid-area: chrono;\n  align-self: start;\n  justify-self: end;\n"]);return B=function(){return e},e}var H=1e3,L=x.a.div(B()),$=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={startTime:void 0,currentInterval:void 0,elapsedTime:void 0},n.play=function(){var e=new Date,t=setInterval(function(){var t=(new Date).getTime()-e.getTime();n.setState({elapsedTime:t})},H);n.setState({currentInterval:t})},n.stop=function(){clearInterval(n.state.currentInterval);var e=n.props.timeFromPastSession,t=n.state.elapsedTime;t&&n.props.onStop(t+1e3*e)},n.onTwoDigits=function(e){return e.toString().padStart(2,"0")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentDidMount",value:function(){this.props.startNow&&this.play()}},{key:"componentDidUpdate",value:function(e){!e.startNow&&this.props.startNow&&this.play()}},{key:"renderElapsedTime",value:function(){var e=this.props.timeFromPastSession,t=this.state.elapsedTime||0,n=new Date(t+1e3*e),r=[n.getUTCHours(),n.getMinutes(),n.getSeconds()].map(this.onTwoDigits).filter(function(e,t){return 0!==t||"00"!==e}).join(":");return a.a.createElement("h2",{"data-testid":"display"},r)}},{key:"render",value:function(){return a.a.createElement(L,null,this.renderElapsedTime())}}]),t}(a.a.PureComponent);$.defaultProps={timeFromPastSession:0};var K=$;function Q(){var e=Object(h.a)(["\n  grid-area: button;\n  align-self: end;\n  justify-self: end;\n"]);return Q=function(){return e},e}function X(){var e=Object(h.a)(['\n  display: grid;\n  height: calc(100vh - 28px);\n  grid-template-areas: "board board" "list chrono" "list button";\n  grid-template-columns: 82vw 1fr;\n']);return X=function(){return e},e}var Y,Z,_,ee,te=x.a.div(X()),ne=Object(x.a)(v.a)(Q()),re=Object(j.c)(function(e){var t=e.game,n=e.isStarted,a=e.setDuration,o=e.handleValuePicked;return r.createElement(te,null,r.createElement(R,{pickedValues:t.pickedValues,onValuePicked:o}),r.createElement(D,{game:t}),r.createElement(K,{startNow:n,onStop:a,timeFromPastSession:t.duration}),r.createElement(ne,{to:"/"},r.createElement(O.a,{color:"violet"},"Fin de partie")))}),ae=n(7),oe=Object(j.b)("gamesStore")(Y=Object(j.c)((Z=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isStarted:!1},Object(f.a)(n,"toggleValue",_,Object(g.a)(Object(g.a)(n))),Object(f.a)(n,"handleDuration",ee,Object(g.a)(Object(g.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.gamesStore;e.currentGameIndex=this.getIDAsNumber(),this.getIDAsNumber()>=e.games.length&&e.initiateNewGame()}},{key:"getID",value:function(){return this.props.match.params.id}},{key:"getIDAsNumber",value:function(){return Number.parseInt(this.getID())}},{key:"render",value:function(){var e=this.props.gamesStore.games;if(this.getIDAsNumber()>=e.length)return"";var t=e[this.getIDAsNumber()],n=this.state.isStarted;return r.createElement(re,{game:t,isStarted:n,handleValuePicked:this.toggleValue,setDuration:this.handleDuration})}}]),t}(r.Component),Object(b.a)(Z.prototype,"componentDidMount",[ae.d],Object.getOwnPropertyDescriptor(Z.prototype,"componentDidMount"),Z.prototype),_=Object(b.a)(Z.prototype,"toggleValue",[ae.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.toggleValue(e.getIDAsNumber(),t),e.setState({isStarted:!0})}}}),ee=Object(b.a)(Z.prototype,"handleDuration",[ae.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.setDuration(e.getIDAsNumber(),t)}}}),Y=Z))||Y)||Y,ie=n(45),ce=n(300),le=n(296);function se(e){if(!e)return"";var t=Math.floor(e/60);return"".concat(t," minute").concat(t>1?"s":"")}var ue=Object(j.c)(function(e){var t,n=e.game,r=e.index;return a.a.createElement(le.a,{header:"Partie ".concat(r+1),meta:(t=n.pickedValues.length,"".concat(t," tirage").concat(t>1?"s":"")+" - "+se(n.duration)),description:a.a.createElement("span",{"data-testid":"game-card"},n.pickedValues.join(", ")),extra:a.a.createElement(v.a,{to:"/game/".concat(r)},a.a.createElement(O.a,{basic:!0,color:"violet"},"Continuer"))})}),pe=function(e){var t=e.newIndex;return a.a.createElement(le.a,{description:"D\xe9marrer nouvelle partie",extra:a.a.createElement(v.a,{to:"/game/".concat(t)},a.a.createElement(O.a,{color:"violet"},"Nouvelle partie"))})};function me(){var e=Object(h.a)(["\n  float: right;\n"]);return me=function(){return e},e}var de,fe=x.a.div(me()),ge=Object(j.b)("gamesStore")(Object(j.c)(function(e){var t=e.gamesStore;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ce.a,{as:"div"},"Double-quine",a.a.createElement(fe,null,a.a.createElement(O.a,{color:"red",basic:!0,"aria-label":"clear all games",tabIndex:0,onClick:function(){return e=t,void(window.confirm("Voulez-vous supprimer toutes les parties ?")&&e.trashAllGames());var e}},"tout supprimer"))),a.a.createElement(le.a.Group,{className:"fullWidth"},t.games&&[].concat(Object(ie.a)(t.games.map(function(e,t){return a.a.createElement(ue,{key:t,game:e,index:t})})),[a.a.createElement(pe,{newIndex:t.games.length,key:t.games.length})]).reverse()))})),be=Object(j.c)(de=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(j.a,{gamesStore:this.props.store},a.a.createElement(m.a,{basename:"/double-quine"},a.a.createElement("div",null,a.a.createElement(d.a,{path:"/",exact:!0,component:ge}),a.a.createElement(d.a,{path:"/game/:id",component:oe})))))}}]),t}(a.a.Component))||de,he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Oe,je,ye,we=n(52),ke={pickedValues:[],duration:0},Ee=(Oe=function(){function e(){var t=this;Object(c.a)(this,e),Object(f.a)(this,"games",je,this),Object(f.a)(this,"currentGameIndex",ye,this),Object(ae.e)(function(){t.persistGame(t.currentGameIndex,t.games[t.currentGameIndex])}),this.getItemsFromStorage()}return Object(l.a)(e,[{key:"getItemsFromStorage",value:function(){var e=this;Object(we.c)().then(function(t){return Promise.all(t.map(function(e){return Object(we.b)(e)})).then(function(t){e.games=t.map(function(e){return Object(ae.m)(JSON.parse(e.toString()))})})})}},{key:"toggleValue",value:function(e,t){var n=this.games[e],r=n.pickedValues,a=r.indexOf(t);if(r.length&&a===r.length-1){var o=Object(y.a)({},n,{pickedValues:r.slice(0,r.length-1)});this.games.splice(e,1,o)}else if(-1===a){var i=Object(y.a)({},n,{pickedValues:[].concat(Object(ie.a)(r),[t])});this.games.splice(e,1,i)}}},{key:"setDuration",value:function(e,t){this.games[e].duration=Math.floor(t/1e3)}},{key:"initiateNewGame",value:function(){this.games.push(ke)}},{key:"trashAllGames",value:function(){this.games.splice(0,this.games.length),this.currentGameIndex=-1,Object(we.a)().catch(console.error)}},{key:"persistGame",value:function(e,t){this.currentGameIndex>=0&&this.currentGameIndex<this.games.length&&Object(we.d)(e.toString(),JSON.stringify(Object(ae.o)(t))).catch(console.error)}},{key:"allPickedNumbers",get:function(){return this.games.map(function(e){return e.pickedValues}).reduce(function(e,t){return[].concat(Object(ie.a)(e),Object(ie.a)(t))},[]).reduce(function(e,t){return e[t]=e[t]?e[t]+1:1,e},{})}}]),e}(),je=Object(b.a)(Oe.prototype,"games",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Object(b.a)(Oe.prototype,"currentGameIndex",[ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Object(b.a)(Oe.prototype,"toggleValue",[ae.d],Object.getOwnPropertyDescriptor(Oe.prototype,"toggleValue"),Oe.prototype),Object(b.a)(Oe.prototype,"setDuration",[ae.d],Object.getOwnPropertyDescriptor(Oe.prototype,"setDuration"),Oe.prototype),Object(b.a)(Oe.prototype,"initiateNewGame",[ae.d],Object.getOwnPropertyDescriptor(Oe.prototype,"initiateNewGame"),Oe.prototype),Object(b.a)(Oe.prototype,"trashAllGames",[ae.d],Object.getOwnPropertyDescriptor(Oe.prototype,"trashAllGames"),Oe.prototype),Object(b.a)(Oe.prototype,"allPickedNumbers",[ae.f],Object.getOwnPropertyDescriptor(Oe.prototype,"allPickedNumbers"),Oe.prototype),Oe),Se=(n(285),n(288),new Ee);i.a.render(a.a.createElement(be,{store:Se}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/double-quine",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/double-quine","/service-worker.js");he?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ve(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ve(t,e)})}}()}},[[156,2,1]]]);
//# sourceMappingURL=main.7e445e14.chunk.js.map