(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,n){e.exports=n(294)},163:function(e,t,n){},292:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),i=n.n(o),c=(n(163),n(15)),l=n(16),s=n(24),u=n(22),p=n(23),m=n(304),d=n(303),g=n(49),f=n(48),h=(n(107),n(29)),b=n(27),v=n(299),O=n(301),j=n(21),y=n(60),k={width:"2.5rem",height:"2.5rem",border:"5px solid #33e8",borderRadius:"2rem",margin:"3px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"large",color:"#55f",fontFamily:"monospace"},w=Object(y.a)({},k,{border:"5px solid lightgrey",color:"grey"}),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.on;return a.createElement("div",{"data-testid":n?"picked":"available",style:n?k:w},t)}}]),t}(a.PureComponent),S={container:{gridArea:"list"},list:{display:"flex",flexWrap:"wrap",minHeight:"41px"}},D=function(e){var t=e.game;return a.createElement("div",{style:S.container},a.createElement("h2",null," Total tirages: ",t.pickedValues.length),a.createElement("div",{style:S.list},t&&t.pickedValues.map(function(e){return a.createElement(E,{value:e,key:e,on:!0})})))},N=n(133),I=n.n(N),P=n(28);function x(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n"]);return x=function(){return e},e}var V=P.a.div(x()),A=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=n.props,t=e.value;(0,e.toggleNumber)(t)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.createElement(O.a,{onClick:this.handleClick,basic:!0,fluid:!0,className:"numberCell"},a.createElement(V,null,a.createElement(E,this.props)))}}]),t}(a.PureComponent);function C(){var e=Object(b.a)(["\n  grid-area: board;\n"]);return C=function(){return e},e}function G(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return G=function(){return e},e}var T=P.a.div(G()),F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getOnProp=function(e){return e.props.on},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return!I()(e.children.map(this.getOnProp),this.props.children.map(this.getOnProp))}},{key:"render",value:function(){var e=this.props.children;return a.createElement(T,null,e)}}]),t}(a.Component),W=P.a.div(C()),z=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pickedValues,n=e.onValuePicked,r=this.props.rows,o=void 0===r?9:r;return a.createElement(W,null,Array(o).fill(null).map(function(e,r){return a.createElement(F,{key:r},Array(10).fill(null).map(function(e,o){var i=10*r+o+1;return a.createElement(A,{key:o,value:i,on:t.includes(i),toggleNumber:n})}))}))}}]),t}(a.PureComponent);function M(){var e=Object(b.a)(["\n  grid-area: chrono;\n  align-self: start;\n  justify-self: end;\n"]);return M=function(){return e},e}var U=1e3,q=P.a.div(M()),H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={startTime:void 0,currentInterval:void 0,elapsedTime:void 0},n.play=function(){var e=new Date,t=setInterval(function(){var t=(new Date).getTime()-e.getTime();n.setState({elapsedTime:t})},U);n.setState({currentInterval:t})},n.stop=function(){clearInterval(n.state.currentInterval);var e=n.props.timeFromPastSession,t=n.state.elapsedTime;t&&n.props.onStop(t+1e3*e)},n.onTwoDigits=function(e){return e.toString().padStart(2,"0")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentDidMount",value:function(){this.props.startNow&&this.play()}},{key:"componentDidUpdate",value:function(e){!e.startNow&&this.props.startNow&&this.play()}},{key:"renderElapsedTime",value:function(){var e=this.props.timeFromPastSession,t=this.state.elapsedTime||0,n=new Date(t+1e3*e),a=[n.getUTCHours(),n.getMinutes(),n.getSeconds()].map(this.onTwoDigits).filter(function(e,t){return 0!==t||"00"!==e}).join(":");return r.a.createElement("h2",{"data-testid":"display"},a)}},{key:"render",value:function(){return r.a.createElement(q,null,this.renderElapsedTime())}}]),t}(r.a.PureComponent);H.defaultProps={timeFromPastSession:0};var J=H;function R(){var e=Object(b.a)(["\n  grid-area: button;\n  align-self: end;\n  justify-self: end;\n"]);return R=function(){return e},e}function B(){var e=Object(b.a)(['\n  display: grid;\n  height: calc(100vh - 28px);\n  grid-template-areas: "board board" "list chrono" "list button";\n  grid-template-columns: 82vw 1fr;\n']);return B=function(){return e},e}var L,$,K,Q,X=P.a.div(B()),Y=Object(P.a)(v.a)(R()),Z=Object(j.c)(function(e){var t=e.game,n=e.isStarted,r=e.setDuration,o=e.handleValuePicked;return a.createElement(X,null,a.createElement(z,{pickedValues:t.pickedValues,onValuePicked:o}),a.createElement(D,{game:t}),a.createElement(J,{startNow:n,onStop:r,timeFromPastSession:t.duration}),a.createElement(Y,{to:"/"},a.createElement(O.a,{color:"violet"},"Fin de partie")))}),_=n(7),ee=Object(j.b)("gamesStore")(L=Object(j.c)(($=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isStarted:!1},Object(g.a)(n,"toggleValue",K,Object(f.a)(Object(f.a)(n))),Object(g.a)(n,"handleDuration",Q,Object(f.a)(Object(f.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.gamesStore;e.currentGameIndex=this.getIDAsNumber(),this.getIDAsNumber()>=e.games.length&&e.initiateNewGame()}},{key:"getID",value:function(){return this.props.match.params.id}},{key:"getIDAsNumber",value:function(){return Number.parseInt(this.getID())}},{key:"render",value:function(){var e=this.props.gamesStore.games;if(this.getIDAsNumber()>=e.length)return"";var t=e[this.getIDAsNumber()],n=this.state.isStarted;return a.createElement(Z,{game:t,isStarted:n,handleValuePicked:this.toggleValue,setDuration:this.handleDuration})}}]),t}(a.Component),Object(h.a)($.prototype,"componentDidMount",[_.d],Object.getOwnPropertyDescriptor($.prototype,"componentDidMount"),$.prototype),K=Object(h.a)($.prototype,"toggleValue",[_.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.toggleValue(e.getIDAsNumber(),t),e.setState({isStarted:!0})}}}),Q=Object(h.a)($.prototype,"handleDuration",[_.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.gamesStore.setDuration(e.getIDAsNumber(),t)}}}),L=$))||L)||L,te=n(58),ne=n(302),ae=n(300);function re(e){if(!e)return"";var t=Math.floor(e/60);return"".concat(t," minute").concat(t>1?"s":"")}var oe=Object(j.c)(function(e){var t,n=e.game,a=e.index;return r.a.createElement(ae.a,{header:"Partie ".concat(a+1),meta:(t=n.pickedValues.length,"".concat(t," tirage").concat(t>1?"s":"")+" - "+re(n.duration)),description:r.a.createElement("span",{"data-testid":"game-card"},n.pickedValues.join(", ")),extra:r.a.createElement(v.a,{to:"/game/".concat(a)},r.a.createElement(O.a,{basic:!0,color:"violet"},"Continuer"))})}),ie=function(e){var t=e.newIndex;return r.a.createElement(ae.a,{description:"D\xe9marrer nouvelle partie",extra:r.a.createElement(v.a,{to:"/game/".concat(t)},r.a.createElement(O.a,{color:"violet"},"Nouvelle partie"))})};function ce(){var e=Object(b.a)(["\n  float: right;\n"]);return ce=function(){return e},e}var le,se,ue=P.a.div(ce()),pe=Object(j.b)("gamesStore")(Object(j.c)(function(e){var t=e.gamesStore;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{as:"div"},"Double-quine",r.a.createElement(ue,null,r.a.createElement(v.a,{to:"/stats"},r.a.createElement(O.a,{basic:!0,color:"violet"},"statistiques")),r.a.createElement(O.a,{color:"red",basic:!0,"aria-label":"clear all games",tabIndex:0,onClick:function(){return e=t,void(window.confirm("Voulez-vous supprimer toutes les parties ?")&&e.trashAllGames());var e}},"tout supprimer"))),r.a.createElement(ae.a.Group,{className:"fullWidth"},t.games&&[].concat(Object(te.a)(t.games.map(function(e,t){return r.a.createElement(oe,{key:t,game:e,index:t})})),[r.a.createElement(ie,{newIndex:t.games.length,key:t.games.length})]).reverse()))})),me=n(146),de=(n(286),Object(j.b)("gamesStore")(le=Object(j.c)(le=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.gamesStore.allPickedNumbers;return e.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Statistiques"),r.a.createElement("h2",null,"Toutes parties confondues"),r.a.createElement(me.a,{data:e,className:"-striped -highlight",columns:[{Header:"Num\xe9ro",accessor:"value"},{Header:"tirages",accessor:"picked"}],defaultPageSize:e.length,showPaginationBottom:!1,defaultSorted:[{id:"value",asc:!0},{id:"picked",asc:!0}]})):null}}]),t}(r.a.Component))||le)||le),ge=Object(j.c)(se=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{gamesStore:this.props.store},r.a.createElement(m.a,{basename:"/double-quine"},r.a.createElement("div",null,r.a.createElement(d.a,{path:"/",exact:!0,component:pe}),r.a.createElement(d.a,{path:"/game/:id",component:ee}),r.a.createElement(d.a,{path:"/stats",component:de})))))}}]),t}(r.a.Component))||se,fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function he(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var be,ve,Oe,je=n(147),ye=n(79),ke={pickedValues:[],duration:0},we=(be=function(){function e(){var t=this;Object(c.a)(this,e),Object(g.a)(this,"games",ve,this),Object(g.a)(this,"currentGameIndex",Oe,this),Object(_.e)(function(){t.persistGame(t.currentGameIndex,t.games[t.currentGameIndex])}),this.getItemsFromStorage()}return Object(l.a)(e,[{key:"getItemsFromStorage",value:function(){var e=this;Object(ye.b)().then(function(t){return Promise.all(t.map(function(e){return Object(ye.a)(e)})).then(function(t){e.games=t.map(function(e){return Object(_.m)(JSON.parse(e.toString()))})})})}},{key:"toggleValue",value:function(e,t){var n=this.games[e],a=n.pickedValues,r=a.indexOf(t);if(a.length&&r===a.length-1){var o=Object(y.a)({},n,{pickedValues:a.slice(0,a.length-1)});this.games.splice(e,1,o)}else if(-1===r){var i=Object(y.a)({},n,{pickedValues:[].concat(Object(te.a)(a),[t])});this.games.splice(e,1,i)}}},{key:"setDuration",value:function(e,t){this.games[e].duration=Math.floor(t/1e3)}},{key:"initiateNewGame",value:function(){this.games.push(ke)}},{key:"trashAllGames",value:function(){this.games.splice(0,this.games.length),this.currentGameIndex=-1,localStorage.clear()}},{key:"persistGame",value:function(e,t){this.currentGameIndex>=0&&this.currentGameIndex<this.games.length&&Object(ye.c)(e.toString(),JSON.stringify(Object(_.o)(t))).catch(console.error)}},{key:"allPickedNumbers",get:function(){var e=this.games.map(function(e){return e.pickedValues}).reduce(function(e,t){return[].concat(Object(te.a)(e),Object(te.a)(t))},[]).reduce(function(e,t){return e[t]=e[t]?e[t]+1:1,e},{});return Object.entries(e).map(function(e){var t=Object(je.a)(e,2),n=t[0],a=t[1];return{value:Number.parseInt(n),picked:Number.parseInt(a.toString())}})}}]),e}(),ve=Object(h.a)(be.prototype,"games",[_.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oe=Object(h.a)(be.prototype,"currentGameIndex",[_.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Object(h.a)(be.prototype,"toggleValue",[_.d],Object.getOwnPropertyDescriptor(be.prototype,"toggleValue"),be.prototype),Object(h.a)(be.prototype,"setDuration",[_.d],Object.getOwnPropertyDescriptor(be.prototype,"setDuration"),be.prototype),Object(h.a)(be.prototype,"initiateNewGame",[_.d],Object.getOwnPropertyDescriptor(be.prototype,"initiateNewGame"),be.prototype),Object(h.a)(be.prototype,"trashAllGames",[_.d],Object.getOwnPropertyDescriptor(be.prototype,"trashAllGames"),be.prototype),Object(h.a)(be.prototype,"allPickedNumbers",[_.f],Object.getOwnPropertyDescriptor(be.prototype,"allPickedNumbers"),be.prototype),be),Ee=(n(289),n(292),new we);i.a.render(r.a.createElement(ge,{store:Ee}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/double-quine",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/double-quine","/service-worker.js");fe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):he(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):he(t,e)})}}()}},[[158,2,1]]]);
//# sourceMappingURL=main.cb8f4a02.chunk.js.map